###############################################################################
# Rare-variant burden portability (plumbing test) â€” chr22 SAIGE WES(OQFE)
###############################################################################

# --- DNAnexus project where YOU write outputs ---
DX_PROJECT_ID="project-J54g2B8J7pY7bBf9kqjyQFKy"

# --- Source project that contains the OQFE files ---
SRC_PROJ="WGS v2"

# --- Chromosome for plumbing test ---
CHR="22"

# --- Where to write outputs in your current project ---
DEST_INPUTS="/inputs/rv_portability/saige_chr22_plumbing"
DEST_SAIGE="/saige/chr22_test"

# --- Local temp on the compute instance (ephemeral) ---
TMP_BASE="/opt/notebooks/work/tmp/rvp_saige_chr22"

# --- SAIGE app names (as installed on RAP) ---
APP_SPARSE_GRM="saige_gwas_sparse_grm"
APP_NULL_MODEL="saige_gwas_grm"
APP_GBAT="saige_gwas_gbat"

# --- Instance types (test vs full) ---
TEST_INSTANCE_TYPE="mem1_hdd1_v2_x16"
FULL_INSTANCE_TYPE="mem1_hdd1_v2_x72"

# --- TEST MODE to reduce memory ---
TEST_MODE=1

# Keep only first N individuals from .fam (reduces memory in sparse GRM)
TEST_N_INDIV=50000

# Thin to N variants (reduces IO/time; sparse GRM also uses random markers)
TEST_N_VARIANTS=5000

# Sparse GRM params
NUM_RANDOM_MARKER=500
RELATEDNESS_CUTOFF=0.125

# Step2 (GBAT) plumbing (optional)
RUN_GBAT=0

# For step2, restrict to a small genomic region during test
TEST_RANGE_START=1
TEST_RANGE_END=5000000

# Group file strategy:
#   - If RUN_GBAT=1, script will try to locate a UKB-provided group file
#     in WGS v2. If not found, it will stop with instructions.
GROUP_FILE_PATTERN="*group*chr22*"
